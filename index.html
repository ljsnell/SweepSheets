<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SweepSheets â€” Broomball Roster</title>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸ§¹</text></svg>">
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <!-- ===================== HEADER ===================== -->
  <header class="site-header">
    <div class="header-inner">
      <div class="header-left">
        <span class="header-icon" aria-hidden="true">ðŸ§¹</span>
        <div>
          <div class="team-name" id="teamName" contenteditable="true" spellcheck="false">SweepSheets</div>
          <div class="team-season" id="teamSeason" contenteditable="true" spellcheck="false">2025â€“26 Season</div>
        </div>
      </div>
      <div class="header-actions">
        <input type="file" id="csvFileInput" accept=".csv" class="visually-hidden" aria-label="Import CSV file">
        <button class="btn btn-ghost" id="csvExampleBtn">Example CSV File</button>
        <button class="btn btn-ghost" id="importCsvBtn">&#8593; Import CSV</button>
        <button class="btn btn-ghost" id="exportCsvBtn">&#8595; Export CSV</button>
        <button class="btn btn-ghost" id="shareBtn">&#128279; Share</button>
        <button class="btn btn-primary" id="addPlayerBtn">+ Add Player</button>
      </div>
    </div>
  </header>

  <!-- ===================== TAB NAV ===================== -->
  <nav class="tab-bar" role="tablist">
    <button class="tab-btn active" id="tabRoster"   role="tab" aria-selected="true"  aria-controls="rosterTabContent">Roster</button>
    <button class="tab-btn"        id="tabLines"    role="tab" aria-selected="false" aria-controls="linesTabContent">Lines</button>
    <button class="tab-btn"        id="tabSettings" role="tab" aria-selected="false" aria-controls="settingsTabContent">Settings</button>
  </nav>

  <!-- ===================== SHARE BANNER (read-only mode) ===================== -->
  <div id="shareBanner" class="share-banner hidden" role="status" aria-live="polite">
    <span class="share-banner-text">&#128065; Read-only view â€” this roster has been shared with you</span>
    <button class="btn btn-sm btn-primary" id="saveCopyBtn">Save a Copy</button>
  </div>

  <!-- ===================== ROSTER TAB ===================== -->
  <div id="rosterTabContent" class="tab-content" role="tabpanel">

    <!-- Stats bar -->
    <div class="stats-bar">
      <div class="stat-item">
        <span class="stat-num" id="statTotal">0</span>
        <span class="stat-lbl">Total</span>
      </div>
      <div class="stat-divider"></div>
      <div class="stat-item">
        <span class="stat-num" id="statActive">0</span>
        <span class="stat-lbl">Active</span>
      </div>
      <div class="stat-divider"></div>
      <div class="stat-item">
        <span class="stat-num stat-fwd" id="statForwards">0</span>
        <span class="stat-lbl">Fwds</span>
      </div>
      <div class="stat-divider"></div>
      <div class="stat-item">
        <span class="stat-num stat-def" id="statDefense">0</span>
        <span class="stat-lbl">Def</span>
      </div>
      <div class="stat-divider"></div>
      <div class="stat-item">
        <span class="stat-num stat-goal" id="statGoalies">0</span>
        <span class="stat-lbl">Goalies</span>
      </div>
    </div>

    <!-- Toolbar: search, filters, view toggle -->
    <div class="toolbar">
      <div class="toolbar-filters">
        <div class="search-wrap">
          <input type="search" id="searchInput" class="search-input" placeholder="Search players&#8230;" aria-label="Search players">
        </div>
        <select id="positionFilter" class="filter-select" aria-label="Filter by position">
          <option value="">All Positions</option>
          <option value="Forward">Forward</option>
          <option value="Center">Center</option>
          <option value="Defense">Defense</option>
          <option value="Goalie">Goalie</option>
        </select>
        <select id="statusFilter" class="filter-select" aria-label="Filter by status">
          <option value="">All Status</option>
          <option value="Active">Active</option>
          <option value="Injured">Injured</option>
          <option value="Inactive">Inactive</option>
        </select>
        <select id="lineFilter" class="filter-select" aria-label="Filter by line">
          <option value="">All Lines</option>
          <option value="1">Line 1</option>
          <option value="2">Line 2</option>
          <option value="3">Line 3</option>
          <option value="Bench">Bench</option>
        </select>
      </div>
      <div class="view-toggles" role="group" aria-label="View mode">
        <button class="view-btn active" id="cardsViewBtn" title="Card view" aria-pressed="true">&#8862;</button>
        <button class="view-btn" id="tableViewBtn" title="Table view" aria-pressed="false">&#9776;</button>
      </div>
    </div>

    <!-- Cards view -->
    <div id="rosterCards" class="roster-cards" aria-live="polite"></div>

    <!-- Table view (hidden by default) -->
    <div id="rosterTable" class="table-wrap hidden">
      <table class="roster-table" aria-label="Player roster">
        <thead>
          <tr>
            <th class="sortable col-num" data-sort="number"># <span class="sort-icon" aria-hidden="true">&#8597;</span></th>
            <th class="sortable" data-sort="name">Name <span class="sort-icon" aria-hidden="true">&#8597;</span></th>
            <th class="sortable" data-sort="position">Position <span class="sort-icon" aria-hidden="true">&#8597;</span></th>
            <th class="sortable" data-sort="status">Status <span class="sort-icon" aria-hidden="true">&#8597;</span></th>
            <th class="sortable" data-sort="line">Line <span class="sort-icon" aria-hidden="true">&#8597;</span></th>
            <th class="col-toggles-hd">PP / PK</th>
            <th class="col-actions-hd">Actions</th>
          </tr>
        </thead>
        <tbody id="rosterTableBody"></tbody>
      </table>
    </div>

    <!-- Empty state -->
    <div id="emptyState" class="empty-state hidden">
      <div class="empty-icon" aria-hidden="true">ðŸ§¹</div>
      <h2>No players yet</h2>
      <p>Add your first player to build the roster.</p>
      <button class="btn btn-primary" id="emptyAddBtn">+ Add Player</button>
    </div>

  </div><!-- /rosterTabContent -->

  <!-- ===================== LINES TAB ===================== -->
  <div id="linesTabContent" class="tab-content hidden" role="tabpanel">
    <div id="linesContent" aria-live="polite"></div>
  </div>

  <!-- ===================== SETTINGS TAB ===================== -->
  <div id="settingsTabContent" class="tab-content hidden" role="tabpanel"></div>

  <!-- ===================== ADD/EDIT MODAL ===================== -->
  <div class="modal-overlay hidden" id="playerModal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
    <div class="modal">
      <div class="modal-header">
        <h2 id="modalTitle">Add Player</h2>
        <button class="modal-close" id="modalClose" aria-label="Close">&#10005;</button>
      </div>
      <form id="playerForm" class="modal-body" novalidate>
        <div class="form-row">
          <div class="form-group flex-3">
            <label for="playerName">Name <span class="req" aria-hidden="true">*</span></label>
            <input type="text" id="playerName" required placeholder="Full name" autocomplete="off">
          </div>
          <div class="form-group flex-1">
            <label for="playerNumber">Jersey #</label>
            <input type="text" id="playerNumber" placeholder="00" maxlength="4" autocomplete="off">
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label for="playerPosition">Position</label>
            <select id="playerPosition">
              <option value="Forward">Forward</option>
              <option value="Center">Center</option>
              <option value="Defense">Defense</option>
              <option value="Goalie">Goalie</option>
            </select>
          </div>
          <div class="form-group">
            <label for="playerStatus">Status</label>
            <select id="playerStatus">
              <option value="Active">Active</option>
              <option value="Injured">Injured</option>
              <option value="Inactive">Inactive</option>
            </select>
          </div>
          <div class="form-group">
            <label for="playerLine">Line</label>
            <select id="playerLine">
              <option value="1">Line 1</option>
              <option value="2">Line 2</option>
              <option value="3">Line 3</option>
              <option value="Bench">Bench</option>
            </select>
          </div>
        </div>
        <div class="form-group">
          <label>Special Teams</label>
          <div class="toggle-group">
            <label class="toggle-label">
              <input type="checkbox" id="playerPP">
              <span class="toggle-chip pp-chip">&#9889; Power Play</span>
            </label>
            <label class="toggle-label">
              <input type="checkbox" id="playerPK">
              <span class="toggle-chip pk-chip">&#128737; Penalty Kill</span>
            </label>
          </div>
        </div>
        <div class="form-group">
          <label for="playerNotes">Notes</label>
          <textarea id="playerNotes" rows="2" placeholder="Any notes&#8230;"></textarea>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-ghost" id="cancelBtn">Cancel</button>
          <button type="submit" class="btn btn-primary">Save Player</button>
        </div>
      </form>
    </div>
  </div>

  <!-- ===================== CONFIRM DELETE MODAL ===================== -->
  <div class="modal-overlay hidden" id="confirmModal" role="dialog" aria-modal="true" aria-labelledby="confirmTitle">
    <div class="modal modal-sm">
      <div class="modal-header">
        <h2 id="confirmTitle">Remove Player</h2>
        <button class="modal-close" id="confirmClose" aria-label="Close">&#10005;</button>
      </div>
      <div class="modal-body">
        <p>Remove <strong id="confirmPlayerName"></strong> from the roster?<br>This cannot be undone.</p>
      </div>
      <div class="modal-footer">
        <button class="btn btn-ghost" id="confirmCancelBtn">Cancel</button>
        <button class="btn btn-danger" id="confirmDeleteBtn">Remove</button>
      </div>
    </div>
  </div>

  <!-- ===================== SHARE MODAL ===================== -->
  <div class="modal-overlay hidden" id="shareModal" role="dialog" aria-modal="true" aria-labelledby="shareModalTitle">
    <div class="modal modal-share">
      <div class="modal-header">
        <h2 id="shareModalTitle">Share Roster</h2>
        <button class="modal-close" id="shareModalClose" aria-label="Close">&#10005;</button>
      </div>
      <div class="modal-body">
        <p class="share-modal-desc">Anyone with this link can view a read-only snapshot of your current roster.</p>
        <div class="share-url-wrap">
          <input type="text" id="shareUrlInput" class="share-url-input" readonly aria-label="Share URL">
          <button class="btn btn-primary" id="copyShareLinkBtn">Copy</button>
        </div>
        <p class="share-url-note">&#9432; The link captures the roster at this moment &mdash; re-share after making changes.</p>
      </div>
      <div class="modal-footer">
        <button class="btn btn-ghost-dark" id="shareModalCloseFtr">Close</button>
      </div>
    </div>
  </div>

  <!-- ===================== IMPORT OPTIONS MODAL ===================== -->
  <div class="modal-overlay hidden" id="importOptionsModal" role="dialog" aria-modal="true" aria-labelledby="importOptionsTitle">
    <div class="modal modal-sm">
      <div class="modal-header">
        <h2 id="importOptionsTitle">Import CSV</h2>
        <button class="modal-close" id="importOptionsClose" aria-label="Close">&#10005;</button>
      </div>
      <div class="modal-body">
        <p class="import-filename" id="importFilename"></p>
        <p class="import-mode-label">How should this file be imported?</p>
        <div class="import-options">
          <label class="import-option">
            <input type="radio" name="importMode" value="append" checked>
            <div class="import-option-body">
              <span class="import-option-title">Append to roster</span>
              <span class="import-option-desc">Add the imported players to your existing roster</span>
            </div>
          </label>
          <label class="import-option replace-option">
            <input type="radio" name="importMode" value="replace">
            <div class="import-option-body">
              <span class="import-option-title">Replace entire roster</span>
              <span class="import-option-desc">Remove all current players and replace with the imported ones</span>
            </div>
          </label>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-ghost-dark" id="importOptionsCancelBtn">Cancel</button>
        <button class="btn btn-primary" id="importOptionsConfirmBtn">Import</button>
      </div>
    </div>
  </div>

  <!-- ===================== CSV EXAMPLE MODAL ===================== -->
  <div class="modal-overlay hidden" id="csvExampleModal" role="dialog" aria-modal="true" aria-labelledby="csvExampleTitle">
    <div class="modal modal-csv">
      <div class="modal-header">
        <h2 id="csvExampleTitle">CSV Format &amp; Example</h2>
        <button class="modal-close" id="csvExampleClose" aria-label="Close">&#10005;</button>
      </div>
      <div class="modal-body">
        <p class="csv-intro">Your CSV must have a <strong>Name</strong> column. All other columns are optional and case-insensitive. Unknown values fall back to the defaults below.</p>
        <table class="csv-col-table">
          <thead>
            <tr><th>Column</th><th>Allowed values</th><th>Default</th></tr>
          </thead>
          <tbody>
            <tr><td><code>Name</code></td><td>Any text</td><td><em>required</em></td></tr>
            <tr><td><code>Number</code></td><td>Any text</td><td><em>blank</em></td></tr>
            <tr><td><code>Position</code></td><td><code>Forward</code>, <code>Center</code>, <code>Defense</code>, <code>Goalie</code></td><td>Forward</td></tr>
            <tr><td><code>Status</code></td><td><code>Active</code>, <code>Injured</code>, <code>Inactive</code></td><td>Active</td></tr>
            <tr><td><code>Line</code></td><td><code>1</code>, <code>2</code>, <code>3</code>, <code>Bench</code></td><td>Bench</td></tr>
            <tr><td><code>PP</code></td><td><code>true</code>, <code>false</code>, <code>yes</code>, <code>1</code></td><td>false</td></tr>
            <tr><td><code>PK</code></td><td><code>true</code>, <code>false</code>, <code>yes</code>, <code>1</code></td><td>false</td></tr>
            <tr><td><code>Notes</code></td><td>Any text</td><td><em>blank</em></td></tr>
          </tbody>
        </table>
        <pre class="csv-pre"></pre>
      </div>
      <div class="modal-footer">
        <button class="btn btn-ghost-dark" id="csvExampleCloseFtr">Close</button>
        <button class="btn btn-primary" id="downloadExampleBtn">&#8595; Download Example</button>
      </div>
    </div>
  </div>

  <script src="app.js"></script>
</body>
</html>
